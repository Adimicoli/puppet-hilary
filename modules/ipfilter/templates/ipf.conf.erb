# IPF Configuration File
#   1. Allow SSH on all nodes
#   2. Allow pings
#   3. Allow all traffic on private and loopback interfaces
#   4. Allow outgoing on public interface
#   5. Block all unhandled inbound traffic on public interface
#

# 1.
pass in quick on net0 proto tcp from any to any port=22 keep state

# 2.
pass in quick on net0 proto icmp all keep state

# 3.
pass in quick on net1 all
pass out quick on net1 all
pass in quick on lo0 all
pass out quick on lo0 all

# 4.
pass out quick on net0 all

## Custom application rules
<% if rules != 'null' -%>
    <% rules.each do |rule| -%>
<%= rule %>
    <% end -%>
<% end -%>

# 5.
block in on net0 all
